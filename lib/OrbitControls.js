THREE.OrbitControls=function(t,e){function n(){return 2*Math.PI/60/60*u.autoRotateSpeed}function o(){return Math.pow(.95,u.userZoomSpeed)}function i(t){u.enabled!==!1&&u.userRotate!==!1&&(t.preventDefault(),y===w.NONE&&(0===t.button&&(y=w.ROTATE),1===t.button&&(y=w.ZOOM),2===t.button&&(y=w.PAN)),y===w.ROTATE?E.set(t.clientX,t.clientY):y===w.ZOOM?p.set(t.clientX,t.clientY):y===w.PAN,document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",a,!1))}function s(t){if(u.enabled!==!1)if(t.preventDefault(),y===w.ROTATE)l.set(t.clientX,t.clientY),O.subVectors(l,E),u.rotateLeft(2*Math.PI*O.x/m*u.userRotateSpeed),u.rotateUp(2*Math.PI*O.y/m*u.userRotateSpeed),E.copy(l);else if(y===w.ZOOM)v.set(t.clientX,t.clientY),M.subVectors(v,p),M.y>0?u.zoomIn():u.zoomOut(),p.copy(v);else if(y===w.PAN){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,n=t.movementY||t.mozMovementY||t.webkitMovementY||0;u.pan(new THREE.Vector3(-e,n,0))}}function a(){u.enabled!==!1&&u.userRotate!==!1&&(document.removeEventListener("mousemove",s,!1),document.removeEventListener("mouseup",a,!1),y=w.NONE)}function c(t){if(u.enabled!==!1&&u.userZoom!==!1){var e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e>0?u.zoomOut():u.zoomIn()}}function r(t){if(u.enabled!==!1&&u.userPan!==!1)switch(t.keyCode){case u.keys.ROTATE:y=w.ROTATE;break;case u.keys.ZOOM:y=w.ZOOM;break;case u.keys.PAN:y=w.PAN}}function h(t){switch(t.keyCode){case u.keys.ROTATE:case u.keys.ZOOM:case u.keys.PAN:y=w.NONE}}this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.center=new THREE.Vector3,this.userZoom=!0,this.userZoomSpeed=1,this.userRotate=!0,this.userRotateSpeed=1,this.userPan=!0,this.userPanSpeed=2,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minDistance=0,this.maxDistance=1/0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,ROTATE:65,ZOOM:83,PAN:68};var u=this,d=1e-6,m=1800,E=new THREE.Vector2,l=new THREE.Vector2,O=new THREE.Vector2,p=new THREE.Vector2,v=new THREE.Vector2,M=new THREE.Vector2,T=0,R=0,f=1,b=new THREE.Vector3,w={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},y=w.NONE,P={type:"change"};this.rotateLeft=function(t){void 0===t&&(t=n()),R-=t},this.rotateRight=function(t){void 0===t&&(t=n()),R+=t},this.rotateUp=function(t){void 0===t&&(t=n()),T-=t},this.rotateDown=function(t){void 0===t&&(t=n()),T+=t},this.zoomIn=function(t){void 0===t&&(t=o()),f/=t},this.zoomOut=function(t){void 0===t&&(t=o()),f*=t},this.pan=function(t){t.transformDirection(this.object.matrix),t.multiplyScalar(u.userPanSpeed),this.object.position.add(t),this.center.add(t)},this.update=function(){var t=this.object.position,e=t.clone().sub(this.center),o=Math.atan2(e.x,e.z),i=Math.atan2(Math.sqrt(e.x*e.x+e.z*e.z),e.y);this.autoRotate&&this.rotateLeft(n()),o+=R,i+=T,i=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,i)),i=Math.max(d,Math.min(Math.PI-d,i));var s=e.length()*f;s=Math.max(this.minDistance,Math.min(this.maxDistance,s)),e.x=s*Math.sin(i)*Math.sin(o),e.y=s*Math.cos(i),e.z=s*Math.sin(i)*Math.cos(o),t.copy(this.center).add(e),this.object.lookAt(this.center),R=0,T=0,f=1,b.distanceTo(this.object.position)>0&&(this.dispatchEvent(P),b.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",i,!1),this.domElement.addEventListener("mousewheel",c,!1),this.domElement.addEventListener("DOMMouseScroll",c,!1),window.addEventListener("keydown",r,!1),window.addEventListener("keyup",h,!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);